### 信息检索实验一

------

#### 读取数据：

读取 tweets.txt 文件中的多个 json 数据，并转为 python 的字典对象，返回一个字典对象数组

```python
def readText():
    textList = []
    with open("tweets.txt", 'r+') as f:
        content = f.readlines()
    for i in content:
        textList.append(json.loads(i.replace('\n', '')))
    return textList
```

------

#### 制作逆序引索：

同样利用 python 中的 dict 对象，将 word 作为 key 值，而含有 word 的所有数据引索数组作为  value

生成 inverDict 作为逆序索引表（python 的 dict 对象自带排序查找）

```python
inverDict = {}
def create_inverIndex(textList):
    for Dict in textList:
        index = Dict["tweetId"]
        for words in Dict["text"].split(" "):
            if words.lower() in inverDict: inverDict[words.lower()].append(index)
            else: inverDict[words.lower()] = [index]
    return inverDict
```

------

#### 利用逆序引索搜索指定词语：

通过分割用户发送的请求语句来获得 and or not 操作，对于 and 操作使用先小后大排序来减少去并集的时间消耗

```python
def selectSec(k):
    return k[1]

def searchFor(string):
    indexSetAll = set()
    strList_or = string.split(", ")
    for str_or in strList_or:
        sortList = []
        for words in str_or.split(" "):
            betList = [words.lower(), len(inverDict[words.lower()]) if words.lower() in inverDict else 0]
            sortList.append(betList)
        sortList.sort(key = selectSec)
        indexSet = inverDict[sortList[0][0]] if sortList[0][1] != 0 else []
        for words, num in sortList[1:]:
            if num == 0: break
            nowSet = set()
            for i in indexSet:
                if i in inverDict[words]: nowSet.add(i)
            indexSet = nowSet
        for i in indexSet: indexSetAll.add(i)
    return indexSetAll
```

------

#### 注意点：

用户数据输入的语句中有大小写区分，但在实际查找的时候不需要大小写区分，所以在最开始分割数据进行处理时，应该做大小写转化，这样可以让数据查询更准确

